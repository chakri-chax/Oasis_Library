{"ast":null,"code":"var _jsxFileName = \"/Users/manlymsv/Downloads/0xN4RM4D4/Oasis/Oasis_Library/src/FigmaForm.jsx\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport \"./Figma.css\";\nimport logo from \"./images/pngwing.png\";\nimport booksTree from \"./images/bookTree.png\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport { useState } from \"react\";\nimport { ethers } from \"ethers\";\nimport abi from \"./abis/libraryV7.json\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport emailjs from '@emailjs/browser';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ntoast.configure();\nconst FigmaForm = () => {\n  _s();\n  const date = new Date();\n  let day = date.getDate();\n  let month = date.getMonth() + 1;\n  let year = date.getFullYear();\n\n  // This arrangement can be altered based on how we want the date's format to appear.\n  let currentDate = `${day}-${month}-${year}`;\n  console.log(currentDate); // \"17-6-2022\"\n  let deadline = `${day}-${month + 1}-${year}`;\n  console.log(deadline);\n  const location = useLocation();\n  console.log(\"location\", location);\n  const values = location.state;\n  const delay = ms => new Promise(res => setTimeout(res, ms));\n  const [hash, setHash] = useState('0x7cd23........c43f');\n  const [details, setDetails] = \"Details\";\n  const [studentId, setStudentId] = useState(\"\");\n  const [studentName, setStudentName] = useState(\"\");\n  const [bookId, setBookId] = useState(\"\");\n  const [bookName, setBookName] = useState(\"\");\n  const [buttonText, setButtonText] = useState(\"Connect\");\n  const [bookButton, setBoookButton] = useState(\"Borrow Book\");\n  const [succesfull, setSuccessfull] = useState(\" \");\n  const [people, setPeople] = useState([]);\n  const handleSubmit = async e => {\n    try {\n      e.preventDefault();\n      if (checkIdInput(studentId) && studentName && bookId && bookName) {\n        const person = {\n          id: new Date().getTime().toString(),\n          studentId,\n          studentName,\n          bookId,\n          bookName\n        };\n        setBoookButton(\"Loading.....\");\n        const exportPerson = {\n          studentId,\n          studentName,\n          bookId,\n          bookName\n        };\n        console.log(\"Details\", exportPerson.studentId);\n        const contractAddress = \"0x636001d0e70aec80444D5f69A10e55613D9d3340\";\n        const contractABI = abi;\n        const provider = new ethers.providers.Web3Provider(window.ethereum);\n        const signer = provider.getSigner();\n        const contract = new ethers.Contract(contractAddress, contractABI, signer);\n        const Borrow = await contract.Borrow(exportPerson.studentId, exportPerson.studentName, exportPerson.bookId, exportPerson.bookName);\n        console.log(\"Hash \", Borrow.hash);\n        let hashCode = Borrow.hash;\n        setHash(hashCode);\n        console.log(hash);\n        await Borrow.wait();\n        sendEmail();\n        setPeople(people => {\n          return [...people, person];\n        });\n        setStudentId(\"\");\n        setStudentName(\"\");\n        setBookId(\"\");\n        setBookName(\"\");\n        setSuccessfull(toast.success(\"Borrowed successful\", {\n          position: toast.POSITION.TOP_CENTER\n        }));\n        await delay(5000);\n        setSuccessfull(\"\");\n      } else {\n        // alert(\"Fill details correctly Especially ID \");\n        toast.warning(\"Enter details correctly Especially ID\", {\n          position: toast.POSITION.TOP_CENTER\n        });\n      }\n    } catch (error) {\n      // reportError(error);\n      // alert()\n      toast.error(`Error Found :${error}`, {\n        position: toast.POSITION.TOP_CENTER\n      });\n    }\n  };\n  function generateEmail(id) {\n    return `${id}@rguktn.ac.in`;\n  }\n  let id = \"N181061\";\n  const email = generateEmail(id.toLowerCase());\n  console.log(email);\n  const sendEmail = () => {\n    emailjs.send('service_qqxen1v', 'template_x9mfcfq', {\n      bookName: `${bookName}`,\n      message: `Hey ${studentName} (${studentId}),The Book :\" ${bookName} \" having Book Id : \" ${bookId} \" Borrowed successfully on  ${currentDate}.Transaction hash of :\" ${hash} \" submit before ${deadline}`,\n      studentMail: `${generateEmail(studentId.toLowerCase())}`\n    }, 'RVorn7tXnujE8ioJt').then(result => {\n      console.log(result.text);\n    }, error => {\n      console.log(error.text);\n    });\n  };\n  function checkIdInput(id) {\n    // Check if the length is 7\n    if (id.length !== 7) {\n      return false;\n    }\n\n    // Convert the first letter to uppercase\n    const firstLetter = id[0].toUpperCase();\n\n    // Check if the first letter is \"N\", \"R\", \"I\", or \"S\"\n    if (![\"N\", \"R\", \"I\", \"S\"].includes(firstLetter)) {\n      return false;\n    }\n\n    // Check if the last 4 digits are less than 1500\n    const lastDigits = parseInt(id.slice(3), 10);\n    if (isNaN(lastDigits) || lastDigits >= 1500) {\n      return false;\n    }\n    return true;\n  }\n  const ButtonText = async () => {\n    if (window.ethereum) {\n      const truncate = (text, startChars, endChars, maxLength) => {\n        if (text.length > maxLength) {\n          var start = text.substring(0, startChars);\n          var end = text.substring(text.length - endChars, text.length);\n          while (start.length + end.length < maxLength) {\n            start = start + \".\";\n          }\n          return start + end;\n        }\n        return text;\n      };\n      try {\n        const provider = new ethers.providers.Web3Provider(window.ethereum);\n        const accounts = await provider.send(\"eth_requestAccounts\", []);\n        const balance = await provider.getBalance(accounts[0]);\n        console.log(\"Balance\", balance);\n        setButtonText(truncate(accounts[0], 4, 4, 11));\n      } catch (error) {\n        toast.error(` Install and Connect Metamask`);\n      }\n    } else {\n      // alert(\"Install metamask\");\n      toast.warning(\" Install and Connect Metamask\", {\n        position: toast.POSITION.TOP_CENTER\n      });\n    }\n  };\n  let navigate = useNavigate();\n  const handleHome = () => {\n    let path = `/`;\n    navigate(path);\n  };\n  const handleConnect = async () => {\n    let path = `/Connect`;\n    navigate(path);\n  };\n  const handleBorrow = () => {\n    let path = `/Borrow`;\n    navigate(path);\n  };\n  const handleStore = () => {\n    let path = `/MyBooks`;\n    navigate(path);\n  };\n  const handleInfo = () => navigate(`/info`);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"form\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"div\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"connect\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"overlap-group\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              border: \"none\",\n              background: \"none\"\n            },\n            onClick: ButtonText,\n            className: \"text-wrapper\",\n            children: buttonText\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"navbar\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"pngwing\",\n          alt: \"Pngwing\",\n          src: logo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            border: \"none\",\n            background: \"none\"\n          },\n          onClick: handleHome,\n          className: \"h-1\",\n          children: \"Home\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            border: \"none\",\n            background: \"none\"\n          },\n          onClick: handleBorrow,\n          className: \"text-wrapper-2\",\n          children: \"Borrow\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            border: \"none\",\n            background: \"none\"\n          },\n          onClick: handleStore,\n          className: \"text-wrapper-3\",\n          children: \"Store\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            border: \"none\",\n            background: \"none\"\n          },\n          onClick: handleInfo,\n          className: \"text-wrapper-4\",\n          children: \"Info\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            border: \"none\",\n            background: \"none\"\n          },\n          className: \"text-wrapper-5\",\n          children: \"Library Claw\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overlap\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-wrapper\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"overlap-wrapper\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"form\", {\n                className: \"my-form\",\n                style: {\n                  fontSize: \"20px\"\n                },\n                onSubmit: handleSubmit,\n                children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                  className: \"h1\",\n                  align: \"center\",\n                  children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Details\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 281,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 280,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"Student ID :\",\n                    children: [\" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Student ID :\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 286,\n                      columnNumber: 23\n                    }, this), \" \"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 284,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    style: {\n                      fontSize: \"20px\"\n                    },\n                    placeholder: \"N180001\",\n                    type: \"text\",\n                    onChange: e => {\n                      setStudentId(e.target.value);\n                    },\n                    value: studentId\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 288,\n                    columnNumber: 21\n                  }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 297,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 283,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"Student Name :\",\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Student Name :\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 301,\n                      columnNumber: 23\n                    }, this), \" \"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 300,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    style: {\n                      fontSize: \"20px\"\n                    },\n                    placeholder: \"Alice\",\n                    type: \"text\",\n                    onChange: e => {\n                      setStudentName(e.target.value);\n                    },\n                    value: studentName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 303,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 312,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 299,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"Book Id :\",\n                    children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Book ID :\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 316,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 315,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    style: {\n                      fontSize: \"20px\"\n                    },\n                    placeholder: values ? values.bookId : \"XundHJYd43nud\",\n                    type: \"text\",\n                    onChange: e => {\n                      values ? setBookId(values.bookId) : setBookId(e.target.value);\n                    },\n                    value: bookId\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 318,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 329,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 314,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"Book Name :\",\n                    children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Book Name :\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 334,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 333,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    style: {\n                      fontSize: \"20px\"\n                    },\n                    placeholder: values ? values.bookName : \"Harry Potter\",\n                    type: \"text\",\n                    onChange: e => {\n                      values ? setBookName(values.bookName) : setBookName(e.target.value);\n                    },\n                    value: bookName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 336,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 347,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 332,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 350,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"center\",\n                  children: studentId && studentName && bookId && bookName ? /*#__PURE__*/_jsxDEV(\"button\", {\n                    children: bookButton\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 354,\n                    columnNumber: 23\n                  }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n                    children: \"Complete the form\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 356,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 352,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 275,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"left-discription\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"overlap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"connect-wallet\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ellipse\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-wrapper-11\",\n                children: \"Connect Wallet\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 367,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"fillform\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ellipse-wrapper\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"ellipse-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 371,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 370,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-wrapper-12\",\n                children: \"Fill the form\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 373,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"connect-wallet-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ellipse\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 376,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-wrapper-11\",\n                children: \"Borrow book\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 377,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 375,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"connect-wallet-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  top: \"-20px\"\n                },\n                className: \"text-wrapper-11\",\n                children: [\"Return the book in time \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 380,\n                  columnNumber: 94\n                }, this), \"else pay 0.015 Matics / day\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 380,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ellipse\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 381,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 379,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ellipse-3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"img\",\n            alt: \"Pngwing\",\n            src: booksTree\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 221,\n    columnNumber: 5\n  }, this);\n};\n_s(FigmaForm, \"IGzTv+PiY+h/+hssAAiDI0DBU8U=\", false, function () {\n  return [useLocation, useNavigate];\n});\n_c = FigmaForm;\nexport default FigmaForm;\nvar _c;\n$RefreshReg$(_c, \"FigmaForm\");","map":{"version":3,"names":["React","logo","booksTree","useNavigate","useLocation","useState","ethers","abi","toast","emailjs","jsxDEV","_jsxDEV","configure","FigmaForm","_s","date","Date","day","getDate","month","getMonth","year","getFullYear","currentDate","console","log","deadline","location","values","state","delay","ms","Promise","res","setTimeout","hash","setHash","details","setDetails","studentId","setStudentId","studentName","setStudentName","bookId","setBookId","bookName","setBookName","buttonText","setButtonText","bookButton","setBoookButton","succesfull","setSuccessfull","people","setPeople","handleSubmit","e","preventDefault","checkIdInput","person","id","getTime","toString","exportPerson","contractAddress","contractABI","provider","providers","Web3Provider","window","ethereum","signer","getSigner","contract","Contract","Borrow","hashCode","wait","sendEmail","success","position","POSITION","TOP_CENTER","warning","error","generateEmail","email","toLowerCase","send","message","studentMail","then","result","text","length","firstLetter","toUpperCase","includes","lastDigits","parseInt","slice","isNaN","ButtonText","truncate","startChars","endChars","maxLength","start","substring","end","accounts","balance","getBalance","navigate","handleHome","path","handleConnect","handleBorrow","handleStore","handleInfo","className","children","style","border","background","onClick","fileName","_jsxFileName","lineNumber","columnNumber","alt","src","fontSize","onSubmit","align","htmlFor","placeholder","type","onChange","target","value","class","top","_c","$RefreshReg$"],"sources":["/Users/manlymsv/Downloads/0xN4RM4D4/Oasis/Oasis_Library/src/FigmaForm.jsx"],"sourcesContent":["import React from \"react\";\r\nimport \"./Figma.css\";\r\nimport logo from \"./images/pngwing.png\";\r\nimport booksTree from \"./images/bookTree.png\";\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\nimport { useState } from \"react\";\r\nimport { ethers } from \"ethers\";\r\nimport abi from \"./abis/libraryV7.json\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport emailjs from '@emailjs/browser';\r\n\r\ntoast.configure();\r\n\r\nconst FigmaForm = () => {\r\n\r\n  const date = new Date();\r\n\r\n  let day = date.getDate();\r\n  let month = date.getMonth() + 1;\r\n  let year = date.getFullYear();\r\n  \r\n  // This arrangement can be altered based on how we want the date's format to appear.\r\n  let currentDate = `${day}-${month}-${year}`;\r\n  console.log(currentDate ); // \"17-6-2022\"\r\n  let deadline = `${day}-${month +1}-${year}`;\r\n  console.log(deadline);\r\n\r\n\r\n  const location = useLocation();\r\n  console.log(\"location\", location);\r\n  const values = location.state;\r\n  const delay = (ms) => new Promise((res) => setTimeout(res, ms));\r\n  \r\n  \r\nconst [hash,setHash] = useState('0x7cd23........c43f')\r\n  const [details, setDetails] = \"Details\";\r\n  const [studentId, setStudentId] = useState(\"\");\r\n  const [studentName, setStudentName] = useState(\"\");\r\n  const [bookId, setBookId] = useState(\"\");\r\n  const [bookName, setBookName] = useState(\"\");\r\n  const [buttonText, setButtonText] = useState(\"Connect\");\r\n  const [bookButton, setBoookButton] = useState(\"Borrow Book\");\r\n  const [succesfull, setSuccessfull] = useState(\" \");\r\n\r\n  const [people, setPeople] = useState([]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    try {\r\n      e.preventDefault();\r\n\r\n      if (checkIdInput(studentId) && studentName && bookId && bookName) {\r\n        const person = {\r\n          id: new Date().getTime().toString(),\r\n          studentId,\r\n          studentName,\r\n          bookId,\r\n          bookName,\r\n        };\r\n        setBoookButton(\"Loading.....\");\r\n        const exportPerson = { studentId, studentName, bookId, bookName };\r\n\r\n        console.log(\"Details\", exportPerson.studentId);\r\n\r\n        \r\n        const contractAddress = \"0x636001d0e70aec80444D5f69A10e55613D9d3340\";\r\n        const contractABI = abi;\r\n        const provider = new ethers.providers.Web3Provider(window.ethereum);\r\n        const signer = provider.getSigner();\r\n        const contract = new ethers.Contract(\r\n          contractAddress,\r\n          contractABI,\r\n          signer\r\n        );\r\n        const Borrow = await contract.Borrow(\r\n          exportPerson.studentId,\r\n          exportPerson.studentName,\r\n          exportPerson.bookId,\r\n          exportPerson.bookName\r\n        );\r\n       console.log(\"Hash \",Borrow.hash);\r\n \r\n       let hashCode = Borrow.hash\r\n       setHash((hashCode));\r\n        console.log(hash);\r\n        await Borrow.wait();\r\n       sendEmail();\r\n\r\n        setPeople((people) => {\r\n          return [...people, person];\r\n        });\r\n\r\n        setStudentId(\"\");\r\n        setStudentName(\"\");\r\n        setBookId(\"\");\r\n        setBookName(\"\");\r\n        setSuccessfull(\r\n          toast.success(\"Borrowed successful\", {\r\n            position: toast.POSITION.TOP_CENTER,\r\n          })\r\n        );\r\n        await delay(5000);\r\n        setSuccessfull(\"\");\r\n      } else {\r\n        // alert(\"Fill details correctly Especially ID \");\r\n        toast.warning(\"Enter details correctly Especially ID\", {\r\n          position: toast.POSITION.TOP_CENTER,\r\n        });\r\n      }\r\n    } catch (error) {\r\n      // reportError(error);\r\n      // alert()\r\n      toast.error(`Error Found :${error}`, {\r\n        position: toast.POSITION.TOP_CENTER,\r\n      });\r\n    }\r\n  };\r\n\r\n  function generateEmail(id) {\r\n    return `${id}@rguktn.ac.in`;\r\n  }\r\n  let id = \"N181061\"\r\n  const email = generateEmail(id.toLowerCase());\r\n  console.log(email);\r\n\r\n\r\n  const sendEmail = () => {\r\n    \r\n\r\n    emailjs.send('service_qqxen1v', 'template_x9mfcfq',\r\n        {\r\n            bookName: `${bookName}`,\r\n            \r\n            message: `Hey ${studentName} (${studentId}),The Book :\" ${bookName} \" having Book Id : \" ${bookId} \" Borrowed successfully on  ${currentDate}.Transaction hash of :\" ${hash} \" submit before ${deadline}`,\r\n            studentMail:`${generateEmail(studentId.toLowerCase())}`\r\n          },\r\n        'RVorn7tXnujE8ioJt')\r\n        .then((result) => {\r\n            console.log(result.text);\r\n        }, (error) => {\r\n            console.log(error.text);\r\n        });\r\n};\r\n\r\n  function checkIdInput(id) {\r\n    // Check if the length is 7\r\n    if (id.length !== 7) {\r\n      return false;\r\n    }\r\n\r\n    // Convert the first letter to uppercase\r\n    const firstLetter = id[0].toUpperCase();\r\n\r\n    // Check if the first letter is \"N\", \"R\", \"I\", or \"S\"\r\n    if (![\"N\", \"R\", \"I\", \"S\"].includes(firstLetter)) {\r\n      return false;\r\n    }\r\n\r\n    // Check if the last 4 digits are less than 1500\r\n    const lastDigits = parseInt(id.slice(3), 10);\r\n    if (isNaN(lastDigits) || lastDigits >= 1500) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  const ButtonText = async () => {\r\n    if (window.ethereum) {\r\n      const truncate = (text, startChars, endChars, maxLength) => {\r\n        if (text.length > maxLength) {\r\n          var start = text.substring(0, startChars);\r\n          var end = text.substring(text.length - endChars, text.length);\r\n          while (start.length + end.length < maxLength) {\r\n            start = start + \".\";\r\n          }\r\n          return start + end;\r\n        }\r\n        return text;\r\n      };\r\n\r\n      try {\r\n        const provider = new ethers.providers.Web3Provider(window.ethereum);\r\n        const accounts = await provider.send(\"eth_requestAccounts\", []);\r\n        const balance = await provider.getBalance(accounts[0]);\r\n        console.log(\"Balance\", balance);\r\n        setButtonText(truncate(accounts[0], 4, 4, 11));\r\n      } catch (error) {\r\n        toast.error(` Install and Connect Metamask`);\r\n      }\r\n    } else {\r\n      // alert(\"Install metamask\");\r\n      toast.warning(\" Install and Connect Metamask\", {\r\n        position: toast.POSITION.TOP_CENTER,\r\n      });\r\n    }\r\n  };\r\n\r\n  let navigate = useNavigate();\r\n\r\n  const handleHome = () => {\r\n    let path = `/`;\r\n    navigate(path);\r\n  };\r\n  const handleConnect = async () => {\r\n    let path = `/Connect`;\r\n    navigate(path);\r\n  };\r\n\r\n  const handleBorrow = () => {\r\n    let path = `/Borrow`;\r\n    navigate(path);\r\n  };\r\n  const handleStore = () => {\r\n    let path = `/MyBooks`;\r\n    navigate(path);\r\n  };\r\n  const handleInfo = () => navigate(`/info`);\r\n\r\n  return (\r\n    <div className=\"form\">\r\n      <div className=\"div\">\r\n        <div className=\"connect\">\r\n          <div className=\"overlap-group\">\r\n            <button\r\n              style={{ border: \"none\", background: \"none\" }}\r\n              onClick={ButtonText}\r\n              className=\"text-wrapper\"\r\n            >\r\n              {buttonText}\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div className=\"navbar\">\r\n          <img className=\"pngwing\" alt=\"Pngwing\" src={logo} />\r\n          <button\r\n            style={{ border: \"none\", background: \"none\" }}\r\n            onClick={handleHome}\r\n            className=\"h-1\"\r\n          >\r\n            Home\r\n          </button>\r\n          <button\r\n            style={{ border: \"none\", background: \"none\" }}\r\n            onClick={handleBorrow}\r\n            className=\"text-wrapper-2\"\r\n          >\r\n            Borrow\r\n          </button>\r\n          <button\r\n            style={{ border: \"none\", background: \"none\" }}\r\n            onClick={handleStore}\r\n            className=\"text-wrapper-3\"\r\n          >\r\n            Store\r\n          </button>\r\n          <button\r\n            style={{ border: \"none\", background: \"none\" }}\r\n            onClick={handleInfo}\r\n            className=\"text-wrapper-4\"\r\n          >\r\n            Info\r\n          </button>\r\n          <button\r\n            style={{ border: \"none\", background: \"none\" }}\r\n            className=\"text-wrapper-5\"\r\n          >\r\n            Library Claw\r\n          </button>\r\n        </div>\r\n        <div className=\"overlap\">\r\n          <div className=\"form-wrapper\">\r\n            <div className=\"overlap-wrapper\">\r\n              <div>\r\n                <form\r\n                  className=\"my-form\"\r\n                  style={{ fontSize: \"20px\" }}\r\n                  onSubmit={handleSubmit}\r\n                >\r\n                  <h1 className=\"h1\" align=\"center\">\r\n                    <strong>Details</strong>\r\n                  </h1>\r\n                  <div>\r\n                    <label htmlFor=\"Student ID :\">\r\n                      {\" \"}\r\n                      <strong>Student ID :</strong>{\" \"}\r\n                    </label>\r\n                    <input\r\n                      style={{ fontSize: \"20px\" }}\r\n                      placeholder=\"N180001\"\r\n                      type=\"text\"\r\n                      onChange={(e) => {\r\n                        setStudentId(e.target.value);\r\n                      }}\r\n                      value={studentId}\r\n                    />{\" \"}\r\n                    <br />\r\n                  </div>\r\n                  <div>\r\n                    <label htmlFor=\"Student Name :\">\r\n                      <strong>Student Name :</strong>{\" \"}\r\n                    </label>\r\n                    <input\r\n                      style={{ fontSize: \"20px\" }}\r\n                      placeholder=\"Alice\"\r\n                      type=\"text\"\r\n                      onChange={(e) => {\r\n                        setStudentName(e.target.value);\r\n                      }}\r\n                      value={studentName}\r\n                    />\r\n                    <br />\r\n                  </div>\r\n                  <div>\r\n                    <label htmlFor=\"Book Id :\">\r\n                      <strong>Book ID :</strong>\r\n                    </label>\r\n                    <input\r\n                      style={{ fontSize: \"20px\" }}\r\n                      placeholder={values ? values.bookId : \"XundHJYd43nud\"}\r\n                      type=\"text\"\r\n                      onChange={(e) => {\r\n                        values\r\n                          ? setBookId(values.bookId)\r\n                          : setBookId(e.target.value);\r\n                      }}\r\n                      value={bookId}\r\n                    />\r\n                    <br />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label htmlFor=\"Book Name :\">\r\n                      <strong>Book Name :</strong>\r\n                    </label>\r\n                    <input\r\n                      style={{ fontSize: \"20px\" }}\r\n                      placeholder={values ? values.bookName : \"Harry Potter\"}\r\n                      type=\"text\"\r\n                      onChange={(e) => {\r\n                        values\r\n                          ? setBookName(values.bookName)\r\n                          : setBookName(e.target.value);\r\n                      }}\r\n                      value={bookName}\r\n                    />\r\n                    <br />\r\n                  </div>\r\n\r\n                  <br />\r\n\r\n                  <div class=\"center\">\r\n                    {studentId && studentName && bookId && bookName ? (\r\n                      <button>{bookButton}</button>\r\n                    ) : (\r\n                      <button>Complete the form</button>\r\n                    )}\r\n                  </div>\r\n                </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"left-discription\">\r\n            <div className=\"overlap-3\">\r\n              <div className=\"connect-wallet\">\r\n                <div className=\"ellipse\" />\r\n                <div className=\"text-wrapper-11\">Connect Wallet</div>\r\n              </div>\r\n              <div className=\"fillform\">\r\n                <div className=\"ellipse-wrapper\">\r\n                  <div className=\"ellipse-2\" />\r\n                </div>\r\n                <div className=\"text-wrapper-12\">Fill the form</div>\r\n              </div>\r\n              <div className=\"connect-wallet-2\">\r\n                <div className=\"ellipse\" />\r\n                <div className=\"text-wrapper-11\">Borrow book</div>\r\n              </div>\r\n              <div className=\"connect-wallet-3\">\r\n                <p style={{top:\"-20px\"}} className=\"text-wrapper-11\">Return the book in time <br/>else pay 0.015 Matics / day</p>\r\n                <div className=\"ellipse\" />\r\n              </div>\r\n              {/* <img className=\"line\" alt=\"Line\" src=\"line-1.svg\" /> */}\r\n              <div className=\"ellipse-3\" />\r\n            </div>\r\n            <img className=\"img\" alt=\"Pngwing\" src={booksTree} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default FigmaForm;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}